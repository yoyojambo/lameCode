<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Challenges</title>
  <link rel="stylesheet" href="/assets/custom.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css">
  <script src="https://unpkg.com/htmx.org@1.9.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.47.0/min/vs/loader.js"></script>

  <style>
    /* Global styling */
	
    .container {
      background-color: #fff;
      /* border-radius: 8px; */
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
	
    /* Style for difficulty boxes */
    .difficulty {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 4px;
      color: white;
      font-size: 0.8em;
    }

    .difficulty-1 { background-color: green; }
    .difficulty-2 { background-color: orange; }
    .difficulty-3 { background-color: red; }

    /* Hover effect for clickable items */
    a:hover {
      background-color: #c4c4c4;
      border-color: #ddd;
    }
  </style>
</head>
<body>
  {{template "navbar"}}

  <div id="main" class="container">
  {{block "problemTable" .}}
    <h1 style="text-align: center">All Challenges</h1>
    <div id="challenge-list" hx-get="/problemlist?page=1" hx-trigger="load" hx-swap="innerHTML"></div>
  {{end}}
  </div>
</body>
</html>
{{ define "challengeList"}}
<div>
  <ul style="list-style: none; padding: 0;">
    {{- range .Challenges }}
      <li style="margin-bottom: 20px;">
        <a href="/problem/{{ .ID }}" style="text-decoration: none; color: inherit; display: block; padding: 10px; border: 1px solid transparent; border-radius: 4px; transition: background-color 0.3s;">
          <h5 style="margin: 0;"><b>{{ .Title }}</b></h5>
          <p style="margin: 5px 0;">
            <span class="difficulty difficulty-{{ .Difficulty }}">
              Difficulty: {{ .Difficulty }}
            </span>
          </p>
        </a>
      </li>
    {{- else }}
      <li>No challenges available.</li>
    {{- end }}
  </ul>
</div>
{{- if .HasNext }}
<div hx-get="/problemlist?page={{ .NextPage }}" 
     hx-trigger="revealed" 
     hx-swap="outerHTML"
     style="padding: 10px; text-align: center; font-style: italic;">
  Loading more challengesâ€¦
</div>
{{- end }}
{{ end }}
